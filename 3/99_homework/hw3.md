Домашнее задание №3

Срок выполнения - 28 октября 2017 (РК1)

Тема: рефлексия, кодогенерация и вопросы производительности

----

i2s - interface to struct. Функция, которая заполняет значения структуры из map[string]interface{} и подобных - того что получается, если распаковать json в interface{} (см. пример в 3/1_json/dynamic.go)

Задание на работу с рефлексией.

Не очень сложное, но немного муторное в плане того, что надо кучу условий там обработать.

Естественно хардкод, т.е. привязка в какой-то конкретной структуре или полям внутри, запрещен. Функция должна работать в общем случае.

Так же должны обрабатываться ошибки типов данных - есть в тесте.

Из типов данных достаточно предусмотреть те, что есть в тесте.

Запускать `go test -v`

Читайте внимательно доку по рефлекии - https://golang.org/pkg/reflect/#Indirect (конкретно индирект может понадобиться, может нет).

----

search

Есть функиця, которая что-то там ищет по файлу. Но делает она это не очень быстро. Надо её оптимизировать.

Задание на работу с профайлером.

Для генерации графа вам понадобится `graphviz`. Для пользователей windows не забудьте добавить его в PATH чтобы была доступна команда `dot`.

Рекомендую внимательно прочитать доп. материалы на русском (3/additional.md) - там ещё много примеров оптимизации и объяснений как работать с профайлеров. Фактически там есть вся инфа для выполнения этого задания.
 
Там есть с десяток мест где можно оптимизировать. Не обязательно чтобы было 1 в 1 с моими результатами, но подобраться надо как можно ближе.

Результат коммитить в main.go в функцию FastSearch (изначально там то же самое что в SlowSearch). В common.go ничего не править - это эталон, с ним будет сравниваться.

Так же требуется написать отчет, где правили, почему правили и предсотавить скрины из профайлера (можно из консольного pprof, можно из графа) с выделенным местом, куда смотреть. Желательно попунктно - "1. оптмизачия ХХХ. нашлась в YYY (тест, скрин)."

Без отчета с объяснениями ДЗ не принимается!

Пример моих результатов:
```
$ go test -bench . -benchmem
goos: windows
goarch: amd64
pkg: gitlab.com/rvasily/golang-2017-2/3/99_homework/search
BenchmarkSlow-8               10         142703250 ns/op        336887900 B/op    284175 allocs/op
BenchmarkFast-8              500           2782432 ns/op          559910 B/op      10422 allocs/op
PASS
ok      gitlab.com/rvasily/golang-2017-2/3/99_homework/search   3.897s
```

Запуск:
* `go test -v` - чтобы проверить что ничего не сломалось
* `go test -bench . -benchmem` - для просомтра производительности

----

Дополнительное задание.

Написать interface2struct через кодогенерацию.

Не оценивается.